import{p as h}from"./fetch.c0ba397d.js";import{o as i,d as o,e as a,f as b,n as g,h as S,b as d,t as u,i as y,j as m,u as c}from"./app.4974e8a0.js";import{_}from"./plugin-vue_export-helper.f2aa9cb4.js";const R={props:{action:{type:String,default:""},button:{type:Boolean,default:!0},buttonSend:{type:String,default:""},buttonSending:{type:String,default:""},buttonSent:{type:String,default:""},buttonReset:{type:String,default:""},sendIcon:{type:String,default:"paper-plane"},autoReset:{type:Boolean,default:!1},isInvalid:{type:Boolean,default:!1}},data:()=>({sending:!1,sent:!1}),computed:{formData(){return this.$el?new URLSearchParams(new FormData(this.$el)).toString():""}},watch:{sending(){this.$emit("change",this.sending)}},methods:{call(e,s){if(!this.sending&&!this.sent&&!this.isInvalid)return this.sending=!0,h(e,s.data).then(t=>{this.sending=!1,this.autoReset||(this.sent=!0),(s.success||s.then||function(){})(t),(s.complete||s.finally||function(){})(),this.$emit("success",t),this.autoReset&&this.onReset()}).catch(t=>{this.sending=!1;var l;(l=s.error||s.catch)&&l(t);var r;(r=s.complete||s.finally)&&r(),!l&&!r&&(t==null?void 0:t.errors.length)>0?this.$dialog.alert(this.$t("form.internalError")):t.message&&this.$dialog.alert(t.message),this.$emit("error",t==null?void 0:t.errors)})},onSubmit(){this.submit()},onReset(){this.$emit("reset"),this.sending=!1,this.sent=!1},submit(e,s){this.$emit("beforeSubmit"),e=e||this.formData;var t=this.call(this.action,Object.assign({data:e},s));return this.$emit("afterSubmit"),t}}},k=["action"],v=["disabled"],j={key:0},p=["disabled"],B={key:0},$=a("span",{class:"fas fa-check-circle"},null,-1),w={key:1},I=a("span",{class:"fas fa-spinner"},null,-1),A={key:2},C={key:0,type:"reset",class:"btn btn-primary btn-lg"},F=a("span",{class:"fas fa-backward"},null,-1);function N(e,s,t,l,r,n){return i(),o("form",{action:t.action,method:"post",autocomplete:"off",onSubmit:s[0]||(s[0]=c((...f)=>n.onSubmit&&n.onSubmit(...f),["prevent"])),onReset:s[1]||(s[1]=c((...f)=>n.onReset&&n.onReset(...f),["prevent"]))},[a("fieldset",{disabled:e.sending||e.sent},[b(e.$slots,"default",g(S({sending:e.sending,sent:e.sent,submit:n.submit,onSubmit:n.onSubmit,onReset:n.onReset})))],8,v),t.button?(i(),o("fieldset",j,[a("button",{type:"submit",class:"btn btn-primary btn-lg",disabled:e.sent||e.sending},[e.sent?(i(),o("span",B,[$,d(" "+u(t.buttonSent||e.$t("common.form.sent")),1)])):e.sending?(i(),o("span",w,[I,d(" "+u(t.buttonSending||e.$t("common.form.sending")),1)])):(i(),o("span",A,[a("span",{class:y("fas fa-"+t.sendIcon)},null,2),d(" "+u(t.buttonSend||e.$t("common.form.send")),1)]))],8,p),e.sent?(i(),o("button",C,[a("span",null,[F,d(" "+u(t.buttonReset||e.$t("common.form.reset")),1)])])):m("v-if",!0)])):m("v-if",!0)],40,k)}var D=_(R,[["render",N],["__file","/home/korko/secretsanta.next/resources/js/Components/AjaxForm.vue"]]);export{D as A};
