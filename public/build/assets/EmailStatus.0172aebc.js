import{T as m}from"./Tooltip.0e4cb4a1.js";import{_ as p}from"./plugin-vue_export-helper.f2aa9cb4.js";import{r as _,o as s,d as i,e as t,b as n,t as o,i as f,F as h,c as y,w as l,j as b,p as v,m as g}from"./app.5fe4871d.js";const T={components:{Tooltip:m},props:{can_redo:{type:Boolean,default:!0},delivery_status:{type:String,required:!0},last_update:{type:[String,Number],default:null},disabled:{type:Boolean,default:!1},rateLimit:{type:Number,default:5*60*1e3}},data:()=>({recent:!0,recentUpdateTimeout:null}),computed:{icon(){return{created:"fas fa-spinner",sending:"fas fa-spinner",sent:"fas fa-check",received:"fas fa-check",error:"fas fa-exclamation-triangle"}[this.delivery_status]}},watch:{last_update:{immediate:!0,handler(){this.recent=this.isRecent(),this.recent&&(this.recentUpdateTimeout&&clearTimeout(this.recentUpdateTimeout),this.recentUpdateTimeout=setTimeout(()=>{this.recent=this.isRecent()},this.rateLimit-this.getDelay()))}}},methods:{getDelay(){return new Date().getTime()-new Date(this.last_update).getTime()},isRecent(){return this.getDelay()<this.rateLimit}}},d=e=>(v("data-v-2137858a"),e=e(),g(),e),k={class:"text-content"},S={disabled:!0,type:"button",class:"btn btn-outline-secondary"},w=d(()=>t("i",{class:"fas fa-redo"},null,-1)),B=["disabled"],D=d(()=>t("i",{class:"fas fa-redo"},null,-1));function C(e,r,a,N,$,c){const u=_("tooltip");return s(),i("div",null,[t("span",null,[n(o(e.$t(`common.email.status.${a.delivery_status}`))+" ",1),t("i",{class:f([c.icon,a.delivery_status])},null,2)]),a.can_redo||a.delivery_status==="error"?(s(),i(h,{key:0},[e.recent?(s(),y(u,{key:0,direction:"left"},{tooltip:l(()=>[t("div",k,o(e.$t("common.email.recent")),1)]),default:l(()=>[t("button",S,[w,n(" "+o(e.$t("common.email.redo")),1)])]),_:1})):(s(),i("button",{key:1,disabled:a.disabled,type:"button",class:"btn btn-outline-secondary",onClick:r[0]||(r[0]=E=>e.$emit("redo"))},[D,n(" "+o(e.$t("common.email.redo")),1)],8,B))],64)):b("",!0)])}var R=p(T,[["render",C],["__scopeId","data-v-2137858a"]]);export{R as E};
