import{p as h}from"./fetch.49ea9645.js";import{o as i,d as o,e as a,f as b,n as g,h as S,b as d,t as u,i as y,j as m,u as c}from"./app.91289146.js";import{_ as R}from"./plugin-vue_export-helper.f2aa9cb4.js";const _={props:{action:{type:String,default:""},button:{type:Boolean,default:!0},buttonSend:{type:String,default:""},buttonSending:{type:String,default:""},buttonSent:{type:String,default:""},buttonReset:{type:String,default:""},sendIcon:{type:String,default:"paper-plane"},autoReset:{type:Boolean,default:!1},isInvalid:{type:Boolean,default:!1}},data:()=>({sending:!1,sent:!1}),computed:{formData(){return this.$el?new URLSearchParams(new FormData(this.$el)).toString():""}},watch:{sending(){this.$emit("change",this.sending)}},methods:{call(t,n){if(!this.sending&&!this.sent&&!this.isInvalid)return this.sending=!0,h(t,n.data).then(e=>{this.sending=!1,this.autoReset||(this.sent=!0),(n.success||n.then||function(){})(e),(n.complete||n.finally||function(){})(),this.$emit("success",e),this.autoReset&&this.onReset()}).catch(e=>{this.sending=!1;var l;(l=n.error||n.catch)&&l(e);var r;(r=n.complete||n.finally)&&r(),!l&&!r&&(e==null?void 0:e.errors.length)>0&&this.$dialog.alert(this.$t("form.internalError")),this.$emit("error",e==null?void 0:e.errors)})},onSubmit(){this.submit()},onReset(){this.$emit("reset"),this.sending=!1,this.sent=!1},submit(t,n){this.$emit("beforeSubmit"),t=t||this.formData;var e=this.call(this.action,Object.assign({data:t},n));return this.$emit("afterSubmit"),e}}},k=["action"],v=["disabled"],p={key:0},B=["disabled"],w={key:0},$=a("span",{class:"fas fa-check-circle"},null,-1),j={key:1},I=a("span",{class:"fas fa-spinner"},null,-1),N={key:2},P={key:0,type:"reset",class:"btn btn-primary btn-lg"},V=a("span",{class:"fas fa-backward"},null,-1);function z(t,n,e,l,r,s){return i(),o("form",{action:e.action,method:"post",autocomplete:"off",onSubmit:n[0]||(n[0]=c((...f)=>s.onSubmit&&s.onSubmit(...f),["prevent"])),onReset:n[1]||(n[1]=c((...f)=>s.onReset&&s.onReset(...f),["prevent"]))},[a("fieldset",{disabled:t.sending||t.sent},[b(t.$slots,"default",g(S({sending:t.sending,sent:t.sent,submit:s.submit,onSubmit:s.onSubmit,onReset:s.onReset})))],8,v),e.button?(i(),o("fieldset",p,[a("button",{type:"submit",class:"btn btn-primary btn-lg",disabled:t.sent||t.sending},[t.sent?(i(),o("span",w,[$,d(" "+u(e.buttonSent||t.$t("common.form.sent")),1)])):t.sending?(i(),o("span",j,[I,d(" "+u(e.buttonSending||t.$t("common.form.sending")),1)])):(i(),o("span",N,[a("span",{class:y("fas fa-"+e.sendIcon)},null,2),d(" "+u(e.buttonSend||t.$t("common.form.send")),1)]))],8,B),t.sent?(i(),o("button",P,[a("span",null,[V,d(" "+u(e.buttonReset||t.$t("common.form.reset")),1)])])):m("",!0)])):m("",!0)],40,k)}var E=R(_,[["render",z]]);export{E as A};
