import{F as y}from"./Fetcher.94dac4a3.js";import{N as b}from"./NavPageLink.a41be84b.js";import{f as k}from"./fetch.a5e16e41.js";import{E as w}from"./echo.f22a49e4.js";import{_ as m}from"./plugin-vue_export-helper.f2aa9cb4.js";import{o as n,d as r,b as u,t as F,e as g,j as L,F as N,r as s,c as V,w as i,a as o}from"./app.1ddcde44.js";import"./Fetcher.e970443e.js";const j={props:{routes:{type:Object},pending:{type:Object}},created(){w.channel("pending_draw."+this.pending.id).listen(".status.update",t=>{console.debug("echo",t),this.pending={...this.pending,...t}})},methods:{process(){return this.pending.status="drawing",k(this.routes.process).then(t=>{this.pending.status="drawn"}).catch(t=>{this.pending.status="waiting"})}}},P={key:0},S={key:1},x=g("button",{disabled:""},"Veuillez patienter",-1),B={key:2},D={key:3};function C(t,d,e,_,h,c){return n(),r(N,null,[u(" Bonjour "+F(e.pending.organizer_name)+", ",1),e.pending.status==="created"?(n(),r("div",P,[u(" Votre \xE9v\xE8nement SecretSanta est pr\xEAt \xE0 d\xE9marrer. "),g("button",{onClick:d[0]||(d[0]=(...a)=>c.process&&c.process(...a))},"Lancer le tirage au sort")])):e.pending.status==="drawing"?(n(),r("div",S,[u(" Le tirage au sort est en cours "),x])):e.pending.status==="started"?(n(),r("div",B," Votre \xE9v\xE8nement SecretSanta est d\xE9j\xE0 en cours ")):e.pending.status==="drawn"?(n(),r("div",D," Votre \xE9v\xE8nement SecretSanta a bien \xE9t\xE9 d\xE9marr\xE9 ")):L("",!0)],64)}var O=m(j,[["render",C]]);const E={components:{FetcherLayout:y,NavPageLink:b,PendingDrawForm:O},props:{routes:{type:Object},pending:{type:Object}}};function z(t,d,e,_,h,c){const a=s("i18n-t"),p=s("NavPageLink"),f=s("PendingDrawForm"),l=s("FetcherLayout");return n(),V(l,{route:e.routes.fetch},{"navbar-right":i(()=>[o(p,{href:t.route("form.index")},{default:i(()=>[o(a,{keypath:"common.nav.go"})]),_:1},8,["href"]),o(p,{href:t.route("dashboard")},{default:i(()=>[o(a,{keypath:"common.nav.dashboard"})]),_:1},8,["href"])]),default:i(v=>[o(f,{routes:e.routes,pending:{...e.pending,...v.pending}},null,8,["routes","pending"])]),_:1},8,["route"])}var K=m(E,[["render",z]]);export{K as default};
