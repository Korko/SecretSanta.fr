import{T as m}from"./Tooltip.0f28e006.js";import{r as p,o as s,d as i,e as t,b as n,t as o,i as _,F as f,c as h,w as l,j as y,p as b,m as v}from"./app.0170574e.js";import{_ as g}from"./plugin-vue_export-helper.f2aa9cb4.js";const k={components:{Tooltip:m},props:{can_redo:{type:Boolean,default:!0},delivery_status:{type:String,required:!0},last_update:{type:[String,Number],default:null},disabled:{type:Boolean,default:!1},rateLimit:{type:Number,default:5*60*1e3}},data:()=>({recent:!0,recentUpdateTimeout:null}),computed:{icon(){return{created:"fas fa-spinner",sending:"fas fa-spinner",sent:"fas fa-check",received:"fas fa-check",error:"fas fa-exclamation-triangle"}[this.delivery_status]}},watch:{last_update:{immediate:!0,handler(){this.recent=this.isRecent(),this.recent&&(this.recentUpdateTimeout&&clearTimeout(this.recentUpdateTimeout),this.recentUpdateTimeout=setTimeout(()=>{this.recent=this.isRecent()},this.rateLimit-this.getDelay()))}}},methods:{getDelay(){return new Date().getTime()-new Date(this.last_update).getTime()},isRecent(){return this.getDelay()<this.rateLimit}}},d=e=>(b("data-v-2c0872b3"),e=e(),v(),e),T={class:"text-content"},S={disabled:!0,type:"button",class:"btn btn-outline-secondary"},w=d(()=>t("i",{class:"fas fa-redo"},null,-1)),B=["disabled"],C=d(()=>t("i",{class:"fas fa-redo"},null,-1));function D(e,r,a,E,N,c){const u=p("tooltip");return s(),i("div",null,[t("span",null,[n(o(e.$t(`common.email.status.${a.delivery_status}`))+" ",1),t("i",{class:_([c.icon,a.delivery_status])},null,2)]),a.can_redo||a.delivery_status==="error"?(s(),i(f,{key:0},[e.recent?(s(),h(u,{key:0,direction:"left"},{tooltip:l(()=>[t("div",T,o(e.$t("common.email.recent")),1)]),default:l(()=>[t("button",S,[w,n(" "+o(e.$t("common.email.redo")),1)])]),_:1})):(s(),i("button",{key:1,disabled:a.disabled,type:"button",class:"btn btn-outline-secondary",onClick:r[0]||(r[0]=$=>e.$emit("redo"))},[C,n(" "+o(e.$t("common.email.redo")),1)],8,B))],64)):y("v-if",!0)])}var L=g(k,[["render",D],["__scopeId","data-v-2c0872b3"],["__file","/home/korko/secretsanta.next/resources/js/Components/EmailStatus.vue"]]);export{L as E};
